<import src="../../templates/nodata.wxml" />
<import src="../../templates/login/login.wxml" />
<!-- 活动位 -->
<view wx:if="{{activities && activities.length > 0}}" class="activity-swiper">
  <swiper class="screen-swiper square-dot" indicator-dots="true" circular="true" autoplay="true" interval="5000" duration="500">
    <swiper-item wx:for="{{activities}}" wx:key="index" bindtap="handleActivityClick" data-url="{{item.jump_url}}">
      <image src="{{item.image_url}}" mode="aspectFill"></image>
      <view class="swiper-title">{{item.title}}</view>
    </swiper-item>
  </swiper>
</view>

<!-- 功能icon -->
<view class="cu-list grid col-4 no-border margin-bottom-sm">
  <view class="cu-item" wx:for="{{iconList}}" wx:key="index" bindtap="handleIconClick" data-item="{{item}}">
    <view class="cuIcon-{{item.icon}} text-{{item.color}}"></view>
    <text>{{item.name}}</text>
  </view>
</view>

<!-- 文章列表 -->
<view class="cu-bar bg-white margin-top-sm solid-bottom">
  <view class="action">
    <text class="cuIcon-titles text-orange"></text>
    <text class="text-bold">推荐文章</text>
  </view>
</view>
<view class="cu-card dynamic no-card">
  <view wx:for="{{posts}}" wx:key="id" wx:for-index="idx" wx:for-item="item" data-idx="{{idx}}" id="{{item.id}}" bindtap="bindPostDetail" class="cu-item shadow solids-bottom">
    <view class='text-content margin-top-sm'>{{item.title}}</view>
    <view class="grid col-1 flex-sub padding-lr">
      <view class="only-img-container">
        <image class="only-img" src="{{item.defaultImageUrl}}" mode="aspectFill" lazy-load="{{true}}"></image>
      </view>
    </view>
    <view class='text-gray text-sm text-right padding'>
      <text class="cuIcon-timefill"></text>
      {{item.createTime}}
      <text class="cuIcon-attentionfill" />
      {{item.totalVisits}}
      <text class="cuIcon-appreciatefill" />
      {{item.totalZans}}
    </view>
  </view>
</view>
<!-- 数据不存在 -->
<view wx:if="{{nodata}}">
  <template is="nodata" />
</view>

<!-- 弹出层：授权 -->
<template is="login" data="{{showLogin: showLogin}}"></template>