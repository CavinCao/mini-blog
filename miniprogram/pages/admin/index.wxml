<!-- 设置列表 -->
<view class="cu-bar bg-white solid-bottom margin-top">
    <view class='action'>
        <text class='cuIcon-titles text-orange '></text>
        全局配置
    </view>
</view>
<view class="cu-list menu shadow-lg">
    <view class="cu-item arrow">
        <view class='content' bindtap='showMember'>
            <text class='cuIcon-vip text-grey'></text>
            <text class='text-grey'>会员管理</text>
        </view>
    </view>
    <view class="cu-item arrow">
        <view class='content' bindtap='showSubscribe'>
            <text class='cuIcon-cascades text-grey'></text>
            <text class='text-grey'>订阅消息列表</text>
        </view>
    </view>
    <view class="cu-item arrow">
        <view class='content' bindtap=''>
            <text class='cuIcon-messagefill text-grey'></text>
            <text class='text-grey'>系统日志</text>
        </view>
    </view>
    <view class="cu-item arrow">
        <view class='content' bindtap='showReleaseModal'>
            <text class='cuIcon-formfill text-grey'></text>
            <text class='text-grey'>版本发布</text>
        </view>
    </view>
    <view class="cu-item arrow">
        <view class='content' bindtap='showAdvert'>
            <text class='cuIcon-link text-grey'></text>
            <text class='text-grey'>广告位管理</text>
        </view>
    </view>
</view>
<view class="cu-bar bg-white solid-bottom margin-top">
    <view class='action'>
        <text class='cuIcon-titles text-orange '></text>
        博客管理
    </view>
</view>
<view class="cu-list menu shadow-lg">
    <view class="cu-item arrow">
        <view class='content' bindtap='showComment'>
            <text class='cuIcon-comment text-grey'></text>
            <text class='text-grey'>评论管理</text>
        </view>
    </view>
    <view class="cu-item arrow">
        <view class='content' bindtap='showArticle'>
            <text class='cuIcon-post text-grey'></text>
            <text class='text-grey'>文章管理</text>
        </view>
    </view>
    <view class="cu-item arrow">
        <view class='content' bindtap='showClassify'>
            <text class='cuIcon-form text-grey'></text>
            <text class='text-grey'>专题管理</text>
        </view>
    </view>
    <view class="cu-item arrow">
        <view class='content' bindtap='showLabel'>
            <text class='cuIcon-tagfill text-grey'></text>
            <text class='text-grey'>标签管理</text>
        </view>
    </view>
    <view class="cu-item arrow">
        <view class='content' bindtap='showSyncModal'>
            <text class='cuIcon-refresh text-grey'></text>
            <text class='text-grey'>同步公众号文章</text>
        </view>
    </view>
    <view class="cu-item arrow">
        <view class='content' bindtap='showManualSyncModal'>
            <text class='cuIcon-add text-grey'></text>
            <text class='text-grey'>手动同步文章</text>
        </view>
    </view>
</view>
<!-- formId设置窗口 -->
<view class="cu-modal {{isShow?'show':''}}">
    <view class="cu-dialog">
        <view class="cu-bar bg-white justify-end">
            <view class='content'>生成FormId</view>
            <view class='action' bindtap='hideFormModal'>
                <text class='cuIcon-close text-red'></text>
            </view>
        </view>
        <view class='padding-xl'>
            <view wx:for="{{formIds}}" wx:key="idx" wx:for-index="idx" wx:for-item="item">
                <view>{{item}}</view>
            </view>
        </view>
        <view class="cu-bar bg-white justify-end">
            <view class='action'>
                <form bindsubmit="formSubmit" report-submit="true">
                    <button form-type="submit" class='cu-btn line-green text-green'>
                        生成FormId
                    </button>
                </form>
                <button class='cu-btn bg-green margin-left' bindtap='saveFormIds'>批量保存</button>
            </view>
        </view>
    </view>
</view>
<!-- 版本发布窗口 -->
<view class="cu-modal {{isReleaseShow?'show':''}}">
    <view class="cu-dialog">
        <view class="cu-bar bg-white justify-end">
            <view class='content'>版本发布</view>
            <view class='action' bindtap='hideReleaseModal'>
                <text class='cuIcon-close text-red'></text>
            </view>
        </view>
        <form bindsubmit="formRelaeaseSubmit" report-submit="true">
            <view class='padding-sm'>
                <view class="cu-form-group text-left">
                    <view class='title'>版本:</view>
                    <input placeholder="请填写版本" class='radius' name='releaseName' value='{{release.releaseName}}'></input>
                </view>
                <view class="cu-form-group text-left">
                    <view class='title'>日期:</view>
                    <input placeholder="请填写日期" class='radius' name='releaseDate' value='{{release.releaseDate}}'></input>
                </view>
                <view wx:if="{{isReleaseShow}}" class="cu-form-group text-left">
                    <textarea placeholder="请输入迭代内容" maxlength="-1" name='releaseContent' value='{{release.releaseContent}}' placeholder-class='placeholder'></textarea>
                </view>
            </view>
            <view class="cu-bar bg-white justify-end">
                <view class='action'>
                    <button class='cu-btn' bindtap='hideReleaseModal'>取消</button>
                    <button form-type="submit" class='cu-btn margin-left bg-green'>保存</button>
                </view>
            </view>
        </form>
    </view>
</view>
<!-- 同步公众号文章确认窗口 -->
<view class="cu-modal {{isSyncShow?'show':''}}">
    <view class="cu-dialog">
        <view class="cu-bar bg-white justify-end">
            <view class='content'>同步公众号文章</view>
            <view class='action' bindtap='hideSyncModal'>
                <text class='cuIcon-close text-red'></text>
            </view>
        </view>
        <view class='padding-xl text-center'>
            <view class="cu-avatar xl margin-bottom" style="background-image:url(/images/gravatar.png);"></view>
            <view class='text-lg text-bold margin-bottom-sm'>同步公众号文章</view>
            <view class='text-gray'>确认开始同步公众号最新文章?</view>
            <view class='text-sm text-gray margin-top-sm'>同步将在后台执行，无需等待完成</view>
        </view>
        <view class="cu-bar bg-white justify-center">
            <view class='action'>
                <button class='cu-btn line-gray text-gray' bindtap='hideSyncModal'>取消</button>
                <button class='cu-btn bg-green margin-left' bindtap='confirmSync' loading='{{isSyncing}}'>
                    {{isSyncing ? '同步中...' : '确认同步'}}
                </button>
            </view>
        </view>
    </view>
</view>
<!-- 手动同步文章弹窗 -->
<view class="cu-modal {{isManualSyncShow?'show':''}}">
    <view class="cu-dialog">
        <view class="cu-bar bg-white justify-end">
            <view class='content'>手动同步文章</view>
            <view class='action' bindtap='hideManualSyncModal'>
                <text class='cuIcon-close text-red'></text>
            </view>
        </view>
        <form bindsubmit="formManualSyncSubmit">
            <view class='padding-sm'>
                <view class="cu-form-group text-left">
                    <view class='title'>文章链接:</view>
                    <input placeholder="请输入公众号文章链接" class='radius' name='articleUrl' value='{{manualSync.articleUrl}}'></input>
                </view>
                <view class="cu-form-group text-left">
                    <view class='title'>默认图片:</view>
                    <view class='flex align-center'>
                        <button class='cu-btn bg-blue sm' bindtap='chooseDefaultImage'>{{manualSync.defaultImageUrl ? '重新选择' : '选择图片'}}</button>
                        <text class='text-grey text-sm margin-left-sm'>{{manualSync.defaultImageUrl ? '已选择' : '未选择'}}</text>
                    </view>
                </view>
                <view wx:if="{{manualSync.defaultImageUrl}}" class="cu-form-group text-left">
                    <view class='flex justify-center'>
                        <image src='{{manualSync.defaultImageUrl}}' mode='aspectFit' style='width:200rpx;height:200rpx;'></image>
                    </view>
                </view>
            </view>
            <view class="cu-bar bg-white justify-end">
                <view class='action'>
                    <button class='cu-btn' bindtap='hideManualSyncModal'>取消</button>
                    <button form-type="submit" class='cu-btn margin-left bg-green' loading='{{isManualSyncing}}'>
                        {{isManualSyncing ? '同步中...' : '保存'}}
                    </button>
                </view>
            </view>
        </form>
    </view>
</view>